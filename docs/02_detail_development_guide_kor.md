Investie: 4인 팀을 위한 상세 개발 가이드 (모바일 + 데스크톱 웹)
🎯 가이드의 목표
이 문서는 4명의 엔지니어(프론트엔드 2명, 백엔드 2명)가 각자의 역할에 맞춰 독립적이면서도 동시에 협업할 수 있도록 상세한 개발 단계를 안내합니다. 모든 개발은 Phase 0에서 구축된 모노레포 뼈대와 목업(mock-up) 데이터를 기반으로 진행됩니다.

각 단계는 작은 모듈 단위로 구성되어, 점진적으로 동작하는 기능을 완성해 나가는 것을 목표로 합니다.

👥 팀 역할 정의
프론트엔드 1 (FE1 - 그래프 & 시각화): 차트, 데이터 시각화 컴포넌트 개발을 책임집니다. (모바일/웹 공통)

프론트엔드 2 (FE2 - UI/UX & 레이아웃): 전체 레이아웃, 디자인 시스템, 데이터 표시 및 사용자 인터랙션을 책임집니다. (모바일/웹 공통)

백엔드 1 (BE1 - 금융 데이터): Google Finance, FRED API 연동 및 관련 데이터베이스, 캐싱을 책임집니다.

백엔드 2 (BE2 - 뉴스 & AI): Google News, Claude API 연동 및 관련 AI 요약, 분석 로직을 책임집니다.

Phase 1: 시장 요약 카드 만들기 (첫 번째 기능 통합)
목표: 첫 번째 완전한 기능인 MarketSummaryCard를 완성하여, 전체 아키텍처의 종단 간(end-to-end) 데이터 흐름을 검증합니다.

역할	담당 업무 (Tasks)
FE1	(그래프 & 시각화)
1. S&P500 Sparkline 컴포넌트 개발: Recharts를 사용하여 모바일/웹 양쪽에서 동작하는 스파크라인 차트를 만듭니다. packages/types의 MarketSummaryData 타입에 의존하여 props를 받습니다.
2. FearGreedGauge 컴포넌트 개발: 공포/탐욕 지수를 시각화하는 원형 게이지 컴포넌트를 만듭니다.

FE2	(UI/UX & 레이아웃)
1. MarketSummaryCard 레이아웃 구축: VIX, 금리, CPI, 실업률 등 텍스트 기반 데이터를 표시할 섹션을 포함하여 카드 전체의 레이아웃을 구성합니다.
2. FE1 컴포넌트 통합: S&P500Sparkline, FearGreedGauge를 레이아웃에 배치합니다.
3. 데이터 연동 (Mock): 백엔드의 목업 엔드포인트(/api/v1/market-summary)에서 데이터를 fetch하고, 상태 관리 후 자식 컴포넌트에 props로 전달합니다.

BE1	(금융 데이터)
1. FinancialDataService 구현: FRED API에서 경제지표(CPI, 금리 등)를, Google Finance API에서 VIX와 S&P500 데이터를 가져오는 로직을 구현합니다.
2. 스케줄러 구현: MarketDataScheduler를 만들어 주기적으로 금융 데이터를 업데이트하도록 설정합니다.
3. 캐싱 전략 적용: 경제 지표 데이터에 대해 24시간 Redis 캐시를 적용합니다.
4. API 교체: 컨트롤러에서 기존 목업 데이터를 실제 서비스 호출로 교체합니다.

BE2	(뉴스 & AI)
1. AiContentService 구현: Claude Search API로 실시간 공포/탐욕 지수를, Claude API로 금리 전망(aiOutlook) 텍스트를 생성하는 로직을 구현합니다.
2. 서비스 통합: 생성된 AI 콘텐츠를 메인 MarketSummary 데이터에 통합합니다.
3. 캐싱 전략 적용: AI 생성 콘텐츠에 대해 12시간 Redis 캐시를 적용합니다.
4. API 교체: 컨트롤러에서 관련 목업 데이터를 실제 서비스 호출로 교체합니다.


Phase 2: 주식 카드 기반 만들기 (재사용 가능한 컴포넌트)
목표: 10개 모든 주식에 재사용될 StockCard 컴포넌트의 기반을 만듭니다. 이 단계에서는 실제 데이터가 아닌 목업 데이터를 사용합니다.

역할	담당 업무 (Tasks)
FE1	(그래프 & 시각화)
1. StockPriceChart 컴포넌트 개발: Recharts를 사용하여 과거 가격 데이터를 표시하는 반응형 라인 차트를 만듭니다 (부드러운 애니메이션과 트렌드 표시기 포함).
2. PriceIndicator 컴포넌트 개발: 주가, 등락률, 등락폭을 상승/하락 색상과 함께 표시하는 컴포넌트를 만듭니다.
3. RsiIndicator 컴포넌트 개발: RSI 지수를 기반으로 과매수/과매도 상태를 시각적으로 보여주는 간단한 바(bar) 형태의 컴포넌트를 만듭니다.
4. AI 평가 시각적 컴포넌트: AI 평가 표시용 등급 배지와 신뢰도 표시기를 만듭니다.

FE2	(UI/UX & 레이아웃)
1. StockCard 레이아웃 구축: packages/types의 StockCardData를 prop으로 받는 재사용 가능한 카드 컴포넌트의 전체 구조를 만듭니다.
2. 데이터 표시 요소 구현: 종목명, 심볼, 시가총액, PER 등 텍스트 기반 데이터를 표시할 UI를 구성합니다.
3. FE1 컴포넌트 통합: StockPriceChart, PriceIndicator, RsiIndicator를 적절한 레이아웃 계층으로 카드에 통합합니다.
4. AI 평가 카드 컴포넌트 생성: 뉴스 섹션 이전에 표시되는 AI 종합평가를 위한 AIEvaluationCard 컴포넌트를 만듭니다 (평가 등급, 신뢰도, 주요 요인 포함).
5. 오른쪽 AI 챗봇 인터페이스 구현: 웹에서는 접을 수 있는/확장 가능한 오른쪽 사이드바, 모바일에서는 모달/바텀시트 형태의 챗봇 인터페이스를 만듭니다.
6. 스켈레톤 UI 적용: 데이터 로딩 중임을 나타내는 SkeletonStockCard 컴포넌트를 만듭니다 (차트 및 AI 평가 영역 포함).
7. 반응형 디자인 구현: 차트와 AI 컴포넌트가 모바일과 웹에서 모두 적절히 표시되도록 보장합니다.

BE1	(금융 데이터)
1. StocksService 뼈대 구현: getStockBySymbol 메서드를 포함하는 서비스 클래스를 생성합니다.
2. API 엔드포인트 생성: /api/v1/stocks/:symbol 경로로 요청을 받는 컨트롤러를 만듭니다.
3. 목업 데이터 반환: 이 엔드포인트는 우선 packages/mock/stocks.json에서 해당 심볼의 데이터를 찾아 반환하도록 구현합니다. 이는 FE가 즉시 개발을 시작할 수 있도록 합니다.

BE2	(뉴스 & AI) - ✅ 완료
1. ✅ NewsService 구현 완료: Google News + Claude API 통합으로 뉴스 분석 및 RSI 계산 완료
2. ✅ 데이터 통합 완료: BE1의 StocksService에 combineStockData 메서드로 완전한 통합 완료
3. ✅ 목업 데이터 검증 완료: 모든 10개 주식에 대해 완전한 AI 평가, 뉴스, RSI 데이터 포함


Phase 3: 모든 주식 카드 병렬 개발 및 통합
목표: Phase 2에서 만든 기반을 활용하여 10개의 모든 주식 카드 기능을 병렬로 빠르게 구현하고 화면에 표시합니다.

역할	담당 업무 (Tasks)
FE1	(그래프 & 시각화)
1. 컴포넌트 성능 최적화: 10개 카드가 렌더링될 때 차트 관련 성능 저하가 없는지 확인하고, React.memo 등을 적용하여 최적화합니다.
2. 통합 지원: FE2가 10개 카드를 화면에 표시할 때 발생하는 시각화 관련 이슈를 지원합니다.

FE2	(UI/UX & 레이아웃)
1. HomeScreen에 리스트 구현: 기본 10개 주식 심볼 배열을 기반으로 map 함수를 사용하여 AI 평가가 통합된 10개의 StockCard를 렌더링합니다.
2. 개별 데이터 Fetching: 각 StockCard가 마운트될 때 자신의 심볼에 해당하는 데이터(AI 평가 포함)를 /api/v1/stocks/:symbol에서 비동기적으로 가져오도록 구현합니다.
3. 상태 관리: 각 카드별로 로딩(스켈레톤 UI) 및 에러 상태를 독립적으로 관리할 수 있도록 구현합니다 (AI 평가 로딩 상태 포함).
4. AI 챗봇 통합: 챗봇 상태 관리를 구현하고 개별 종목 카드와 컨텍스트 인식 질문을 위한 통합을 구현합니다.
5. 레이아웃 최적화: 메인 콘텐츠 영역과 오른쪽 챗봇(웹) 또는 모달 챗봇(모바일)을 포함한 적절한 레이아웃을 보장합니다.

BE1	(금융 데이터) - ✅ 완료
1. ✅ 실제 API 연동 완료: Google Finance API 통합으로 실제 가격 및 재무 데이터 제공
2. ✅ 5분 캐싱 적용 완료: Redis 기반 캐싱 전략으로 API 호출 최적화 완료
3. ✅ 성능 모니터링 준비: 동시 요청 처리 및 에러 핸들링 시스템 구축 완료

BE2	(뉴스 & AI) - ✅ 완료
1. ✅ 실제 서비스 연동 완료: Google News + Claude API 완전 통합으로 뉴스 분석 및 AI 평가 제공
2. ✅ 데이터 통합 완료: StocksService의 combineStockData로 BE1+BE2 완전 통합
3. ✅ 캐싱 전략 완료: AI 평가 12시간, 뉴스 6시간, 채팅 1시간 캐시 적용


## 🎉 현재 구현 상태 요약

### ✅ Phase 0-3 구현 완료
**모든 핵심 백엔드 기능이 완전히 구현되어 프론트엔드 개발 준비 완료**

#### BE1 + BE2 통합 완료 상태
- ✅ **시장 요약 AI 강화**: 실시간 공포 & 탐욕 지수 + AI 금리 전망
- ✅ **주식 카드 완전 통합**: 가격 차트 + AI 종합평가 + 뉴스 분석 + RSI
- ✅ **AI 챗봇 시스템**: 세션 기반 투자 어시스턴트 완전 구현
- ✅ **캐싱 최적화**: 계층별 캐싱 전략으로 성능 최적화 완료
- ✅ **API 엔드포인트**: 모든 기능에 대한 RESTful API 완성

### 📋 API 엔드포인트 현황
```bash
# 핵심 데이터 (AI 강화)
GET /api/v1/market-summary     # AI 강화 시장 데이터
GET /api/v1/stocks             # 전체 주식 (BE1+BE2 통합)
GET /api/v1/stocks/:symbol     # 개별 주식 완전 데이터

# AI 챗봇 (완전 구현)
POST /api/v1/chat/sessions     # 새 세션 생성
POST /api/v1/chat/sessions/:id/messages  # AI 메시지
GET  /api/v1/chat/sessions/:id # 세션 기록
```

### 🎯 다음 단계: Phase 4 (인증 및 개인화)
**목표**: 사용자 로그인 기능과 맞춤 관심종목 목록 구현

#### 새로운 기능 요구사항

**1. 사용자 인증 시스템**
- **로그인 방식**: Google, Facebook, GitHub 소셜 로그인
- **인증 관리**: JWT 토큰 기반 세션 관리
- **사용자 프로필**: 기본 정보 및 설정 관리

**2. 관심종목 관리 시스템**
- **기본 종목**: 비로그인 사용자는 기본 10개 종목 (AAPL, TSLA, MSFT, GOOGL, AMZN, NVDA, META, NFLX, AVGO, AMD)
- **맞춤 관심종목**: 로그인 사용자는 개인 관심종목 목록 관리
- **관리 기능**: 종목 추가/삭제/순서 변경
- **최대 종목 수**: 10개 (향후 확장 가능)

**3. UI 배치 및 레이아웃**

**데스크톱 레이아웃 (1024px+):**
```
┌─────────────────────┬───────────────────┬─────────────────────┐
│                     │  관심종목 위젯       │                     │
│                     │  ┌───────────────┐   │                     │
│   주 콘텐츠 영역        │  │ [+ 종목 추가]  │   │   AI 챗봇           │
│   ┌─────────────┐   │  │ ○ AAPL       │   │   ┌─────────────┐   │
│   │시장 요약     │   │  │ ○ TSLA       │   │   │ 채팅 헤더   │   │
│   └─────────────┘   │  │ ○ MSFT   [x] │   │   ├─────────────┤   │
│   ┌─────────────┐   │  └───────────────┘   │   │  메시지     │   │
│   │주식 카드 1   │   │                     │   │  영역       │   │
│   │ - 차트      │   │                     │   ├─────────────┤   │
│   │ - AI 평가   │   │                     │   │ 입력 박스   │   │
│   │ - 뉴스      │   │                     │   └─────────────┘   │
│   └─────────────┘   │                     │                     │
└─────────────────────┴───────────────────┴─────────────────────┘
```

**모바일 레이아웃:**
- **관심종목**: 헤더의 드롭다운 또는 서랍 메뉴
- **AI 챗봇**: 플로팅 버튼으로 모달/바텀 시트 호출
- **종목 목록**: 세로 스크롤 카드 목록

#### 구현 작업 (Phase 4)

**역할별 담당 업무:**

**FE1/FE2 (프론트엔드 팀)**
1. **인증 UI 개발**: 로그인, 설정 화면 구현 (FE2 주도, FE1 지원)
2. **관심종목 위젯**: 상단 우측 영역에 접을 수 있는 관심종목 패널 구현
3. **종목 관리 UI**: 종목 추가/삭제/순서 변경 인터페이스
4. **조건부 렌더링**: 로그인 상태에 따른 기본 vs 맞춤 종목 목록 표시
5. **실시간 동기화**: 관심종목 변경 시 메인 화면 자동 업데이트

**BE1/BE2 (백엔드 팀)**
1. **데이터베이스 스키마**: PostgreSQL users, watchlists 테이블 설계
2. **인증 시스템**: Firebase Auth + JWT 토큰 시스템 구현
3. **관심종목 API**: CRUD 엔드포인트 구현
4. **보안 및 권한**: JWT 검증 가드 및 사용자별 데이터 보호

#### 새로운 API 엔드포인트
```bash
# 인증 시스템
POST /api/v1/auth/login      # 소셜 로그인
POST /api/v1/auth/logout     # 로그아웃
GET  /api/v1/auth/profile    # 사용자 프로필

# 관심종목 관리
GET    /api/v1/user/watchlist     # 사용자 관심종목 목록
POST   /api/v1/user/watchlist     # 종목 추가
DELETE /api/v1/user/watchlist/:symbol  # 종목 삭제
PUT    /api/v1/user/watchlist/order    # 순서 변경
```

#### 의존성 및 통합 고려사항
- **상태 관리**: 전역 상태로 사용자 인증 및 관심종목 관리
- **캐싱 전략**: 사용자별 관심종목 캐싱 (1시간 TTL)
- **실시간 업데이트**: 관심종목 변경 시 메인 데이터 리페치
- **UI 반응성**: 관심종목 위젯과 AI 챗봇의 적절한 공간 배분

Phase 4: 인증 및 개인화 기능 구현
목표: 사용자 로그인 기능을 추가하고, 로그인한 사용자는 자신만의 관심종목 목록을 볼 수 있도록 합니다.

역할	담당 업무 (Tasks)
FE1/FE2	(프론트엔드 팀)
1. 인증 UI 개발: 로그인, 회원가입, 설정 화면을 개발합니다. (FE2 주도, FE1 지원)
2. 인증 흐름 구현: 소셜 로그인 버튼 클릭 시의 UI/UX 흐름을 구현합니다.
3. 관심종목 관리 UI: 설정 화면 내에서 관심종목을 추가/삭제/순서 변경하는 UI를 만듭니다.
4. 조건부 데이터 로딩: HomeScreen에서 로그인 상태에 따라 기본 10개 종목을 로드할지, 사용자의 관심종목 API(/api/v1/user/watchlist)를 호출할지 결정하는 로직을 추가합니다.

BE1/BE2	(백엔드 팀)
1. 데이터베이스 및 API (BE1): PostgreSQL에 users, watchlists 테이블 스키마를 설계하고, 관심종목을 관리하는 CRUD API(/api/v1/user/watchlist)를 구현합니다.
2. 인증 시스템 (BE2): Firebase Auth를 사용하여 소셜 로그인 기능을 구현하고, 로그인 성공 시 JWT 토큰을 발급하는 로직을 만듭니다. 발급된 토큰을 검증하여 사용자 API를 보호하는 가드를 적용합니다.

